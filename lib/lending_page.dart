import 'package:flutter/material.dart';import 'dart:math' as math;import 'animated_page.dart';import 'user_details_page.dart';import 'contact_page.dart';class AnimatedLandingPage extends StatefulWidget {  const AnimatedLandingPage({super.key});  @override  State<AnimatedLandingPage> createState() => _AnimatedLandingPageState();}class _AnimatedLandingPageState extends State<AnimatedLandingPage>    with SingleTickerProviderStateMixin {  late AnimationController _controller;  late Animation<double> _fadeAnim;  late Animation<Offset> _slideAnim;  late Animation<double> _scaleAnim;  late Animation<Color?> _gradientStart;  late Animation<Color?> _gradientEnd;  late Animation<double> _shimmerAnim;  final ScrollController _scrollController = ScrollController();  final GlobalKey<ScaffoldState> _scaffoldKey = GlobalKey<ScaffoldState>();  @override  void initState() {    super.initState();    _controller = AnimationController(      duration: const Duration(seconds: 2),      vsync: this,    );    _fadeAnim = Tween<double>(begin: 0.0, end: 1.0).animate(      CurvedAnimation(parent: _controller, curve: const Interval(0.0, 0.8)),    );    _slideAnim = Tween<Offset>(      begin: const Offset(0, 0.3),      end: Offset.zero,    ).animate(CurvedAnimation(      parent: _controller,      curve: const Interval(0.2, 1.0),    ));    _scaleAnim = Tween<double>(begin: 0.8, end: 1.0).animate(      CurvedAnimation(parent: _controller, curve: Curves.easeOutBack),    );    _gradientStart = ColorTween(      begin: const Color(0xFF1D4ED8),      end: const Color(0xFF22C55E),    ).animate(_controller);    _gradientEnd = ColorTween(      begin: const Color(0xFF22C55E),      end: const Color(0xFF1D4ED8),    ).animate(_controller);    _shimmerAnim = Tween<double>(begin: 0, end: 1).animate(      CurvedAnimation(parent: _controller, curve: Curves.easeInOut),    );    _controller.forward();  }  @override  void dispose() {    _controller.dispose();    _scrollController.dispose();    super.dispose();  }  void _scrollToProfile() {    _scrollController.animateTo(      MediaQuery.of(context).size.height * 0.9,      duration: const Duration(milliseconds: 800),      curve: Curves.easeInOut,    );    if (_scaffoldKey.currentState?.isDrawerOpen ?? false) {      Navigator.pop(context);    }  }  void _scrollToContact() {    _scrollController.animateTo(      _scrollController.position.maxScrollExtent,      duration: const Duration(milliseconds: 1000),      curve: Curves.easeInOut,    );    if (_scaffoldKey.currentState?.isDrawerOpen ?? false) {      Navigator.pop(context);    }  }  void _scrollToHome() {    _scrollController.animateTo(      0,      duration: const Duration(milliseconds: 800),      curve: Curves.easeInOut,    );    if (_scaffoldKey.currentState?.isDrawerOpen ?? false) {      Navigator.pop(context);    }  }  @override  Widget build(BuildContext context) {    final size = MediaQuery.of(context).size;    final bool isMobile = size.width < 700;    return Scaffold(      key: _scaffoldKey,      backgroundColor: const Color(0xFF0F172A),      drawer: isMobile ? _buildDrawer() : null,      appBar: AppBar(        backgroundColor: const Color(0xFF0F172A).withOpacity(0.8),        elevation: 0,        centerTitle: false,        title: GestureDetector(          onTap: _scrollToHome,          child:  const Text(            'KARBH',            style: TextStyle(              fontWeight: FontWeight.bold,              color: Colors.white,              fontSize: 24,              letterSpacing: -1,            ),          ),        ),        leading: isMobile            ? IconButton(                icon: const Icon(Icons.menu, color: Colors.white),                onPressed: () => _scaffoldKey.currentState?.openDrawer(),              )            : null,        actions: isMobile            ? null            : [                _navItem('Home', _scrollToHome),                _navItem('Profile', _scrollToProfile),                _navItem('Contact', _scrollToContact),                const SizedBox(width: 20),              ],      ),      body: SingleChildScrollView(        controller: _scrollController,        physics: const BouncingScrollPhysics(),        child: Column(          children: [            // Hero Section            Container(              height: size.height - kToolbarHeight,              width: double.infinity,              alignment: Alignment.center,              child: ConstrainedBox(                constraints: const BoxConstraints(maxWidth: 1200),                child: Padding(                  padding: EdgeInsets.symmetric(                    horizontal: isMobile ? 24 : 40,                    vertical: 40,                  ),                  child: isMobile ? _buildNarrowLayout() : _buildWideLayout(),                ),              ),            ),                        // Sections with slight overlap or transition            const UserDetailsSection(),            const ContactSection(),                        // Improved Footer            _buildFooter(),          ],        ),      ),    );  }  Widget _navItem(String title, VoidCallback onTap) {    return TextButton(      onPressed: onTap,      style: TextButton.styleFrom(foregroundColor: Colors.white),      child: Text(        title,        style: const TextStyle(fontWeight: FontWeight.w500, fontSize: 16),      ),    );  }  Widget _buildDrawer() {    return Drawer(      backgroundColor: const Color(0xFF1E293B),      child: ListView(        padding: EdgeInsets.zero,        children: [          const DrawerHeader(            decoration: BoxDecoration(color: Color(0xFF0F172A)),            child: Center(              child: Text(                'KARBH',                style: TextStyle(color: Colors.white, fontSize: 32, fontWeight: FontWeight.bold),              ),            ),          ),          _drawerTile(Icons.home, 'Home', _scrollToHome),          _drawerTile(Icons.person, 'Profile', _scrollToProfile),          _drawerTile(Icons.contact_mail, 'Contact', _scrollToContact),        ],      ),    );  }  Widget _drawerTile(IconData icon, String title, VoidCallback onTap) {    return ListTile(      leading: Icon(icon, color: Colors.white70),      title: Text(title, style: const TextStyle(color: Colors.white)),      onTap: onTap,    );  }  Widget _buildWideLayout() {    return Row(      crossAxisAlignment: CrossAxisAlignment.center,      children: [        Expanded(flex: 3, child: _buildAnimatedTextContent(false)),        const SizedBox(width: 60),        Expanded(flex: 2, child: _buildAnimatedIllustration()),      ],    );  }  Widget _buildNarrowLayout() {    return Column(      mainAxisAlignment: MainAxisAlignment.center,      children: [        _buildAnimatedIllustration(),        const SizedBox(height: 48),        _buildAnimatedTextContent(true),      ],    );  }  Widget _buildAnimatedTextContent(bool isCentered) {    return Column(      crossAxisAlignment: isCentered ? CrossAxisAlignment.center : CrossAxisAlignment.start,      mainAxisSize: MainAxisSize.min,      children: [        FadeTransition(          opacity: _fadeAnim,          child: Container(            padding: const EdgeInsets.symmetric(horizontal: 14, vertical: 6),            decoration: BoxDecoration(              color: const Color(0xFF22C55E).withOpacity(0.1),              borderRadius: BorderRadius.circular(20),              border: Border.all(color: const Color(0xFF22C55E).withOpacity(0.2)),            ),            child: const Text(              'WELCOME TO MY PORTFOLIO',              style: TextStyle(                color: Color(0xFF4ADE80),                fontSize: 12,                fontWeight: FontWeight.bold,                letterSpacing: 1.5,              ),            ),          ),        ),        const SizedBox(height: 24),        SlideTransition(          position: _slideAnim,          child: Text(            'Creating Digital\nExperiences that Matter',            textAlign: isCentered ? TextAlign.center : TextAlign.start,            style: TextStyle(              color: Colors.white,              fontSize: isCentered ? 36 : 56,              fontWeight: FontWeight.w900,              height: 1.1,              letterSpacing: -1,            ),          ),        ),        const SizedBox(height: 24),        FadeTransition(          opacity: _fadeAnim,          child: Text(            'I build beautiful, high-performance web and mobile applications using Flutter. Focused on clean code and exceptional user experience.',            textAlign: isCentered ? TextAlign.center : TextAlign.start,            style: TextStyle(              color: Colors.white.withOpacity(0.6),              fontSize: 18,              height: 1.6,            ),          ),        ),        const SizedBox(height: 40),        Wrap(          alignment: isCentered ? WrapAlignment.center : WrapAlignment.start,          spacing: 16,          runSpacing: 16,          children: [            ElevatedButton(              style: ElevatedButton.styleFrom(                backgroundColor: const Color(0xFF22C55E),                foregroundColor: Colors.white,                padding: const EdgeInsets.symmetric(horizontal: 32, vertical: 20),                shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),                elevation: 0,              ),              onPressed: _scrollToProfile,              child: const Text('View My Work', style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),            ),            OutlinedButton(              style: OutlinedButton.styleFrom(                foregroundColor: Colors.white,                side: const BorderSide(color: Colors.white24),                padding: const EdgeInsets.symmetric(horizontal: 32, vertical: 20),                shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),              ),              onPressed: _scrollToContact,              child: const Text('Let\'s Talk', style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16)),            ),          ],        ),      ],    );  }  Widget _buildAnimatedIllustration() {    return AnimatedBuilder(      animation: _controller,      builder: (context, child) {        return ScaleTransition(          scale: _scaleAnim,          child: SweepLineAnimator(            lineColor: Colors.white.withOpacity(0.5),            lineHeight: 2.0,            duration: const Duration(seconds: 3),            child: Container(              height: 400,              width: 400,              decoration: BoxDecoration(                borderRadius: BorderRadius.circular(30),                gradient: LinearGradient(                  colors: [_gradientStart.value!, _gradientEnd.value!],                  begin: Alignment.topLeft,                  end: Alignment.bottomRight,                ),                boxShadow: [                  BoxShadow(                    color: _gradientStart.value!.withOpacity(0.3),                    blurRadius: 40,                    spreadRadius: -10,                  ),                ],              ),              child: Stack(                children: [                  Positioned.fill(                    child: CustomPaint(                      painter: GridPainter(color: Colors.white10),                    ),                  ),                  Center(                    child: Container(                      width: 280,                      height: 200,                      decoration: BoxDecoration(                        color: Colors.black.withOpacity(0.8),                        borderRadius: BorderRadius.circular(20),                        border: Border.all(color: Colors.white10),                      //  backdropFilter: const ColorFilter.mode(Colors.black, BlendMode.srcOver),                      ),                      child: const Center(                        child: Icon(Icons.code, size: 80, color: Colors.white24),                      ),                    ),                  ),                ],              ),            ),          ),        );      },    );  }  Widget _buildFooter() {    return Container(      padding: const EdgeInsets.symmetric(vertical: 60),      width: double.infinity,      color: const Color(0xFF020617),      child: Column(        children: [          const Text(            'KARBH',            style: TextStyle(color: Colors.white, fontSize: 24, fontWeight: FontWeight.bold),          ),          const SizedBox(height: 16),          Text(            'Â© 2023 KARBH. All rights reserved.',            style: TextStyle(color: Colors.white.withOpacity(0.4)),          ),        ],      ),    );  }}class GridPainter extends CustomPainter {  final Color color;  GridPainter({required this.color});  @override  void paint(Canvas canvas, Size size) {    final paint = Paint()..color = color..strokeWidth = 1;    for (double i = 0; i <= size.width; i += 40) {      canvas.drawLine(Offset(i, 0), Offset(i, size.height), paint);    }    for (double i = 0; i <= size.height; i += 40) {      canvas.drawLine(Offset(0, i), Offset(size.width, i), paint);    }  }  @override  bool shouldRepaint(covariant CustomPainter oldDelegate) => false;}